ğŸ›ï¸ AI-Powered Shopify Analytics App
ğŸ“Œ Overview

This project is a mini AI-powered analytics system for Shopify stores.
It allows merchants to ask natural-language business questions (sales trends, inventory risks, customer behavior) and receive simple, layman-friendly answers.

The system translates natural language into ShopifyQL, executes analytics queries (mocked), and returns actionable insights using an agentic AI workflow.

ğŸ¯ Objective

Design and build an AI-powered analytics application that:

Connects to a Shopify store (OAuth-based)

Reads orders, customers, products, and inventory data

Translates natural-language questions into ShopifyQL

Returns clear, business-friendly insights

Focus: design clarity, reasoning, and robustness over production polish

ğŸ—ï¸ System Architecture

The system is intentionally split into two services to maintain clean separation of concerns.

Client / Frontend
        â”‚
        â”‚ POST /api/v1/questions
        â–¼
Rails API (Gateway)
        â”‚
        â”‚ Forward request
        â–¼
FastAPI AI Service
        â”‚
        â”œâ”€â”€ LLM (Intent Planning)
        â”œâ”€â”€ Agent Workflow
        â”œâ”€â”€ ShopifyQL Generation
        â””â”€â”€ Business Explanation

ğŸ§  Why Two Services?
Layer	Responsibility
Rails API	Authentication, validation, orchestration, Shopify OAuth
Python AI Service	LLM reasoning, agent planning, ShopifyQL generation

This mirrors real-world SaaS analytics architectures.

ğŸ§© Agentic Workflow (Core Logic)

The Python AI service implements an agent-based workflow:

Understand Intent

Sales / Inventory / Customers

Plan

Metric (quantity, availability, count)

Time range (days)

Generate ShopifyQL

Deterministic and validated

Execute & Validate

Mocked execution (real Shopify API can be plugged in)

Explain Results

Simple, non-technical language

âš ï¸ Important Design Choice

The LLM is used only for planning, never for generating numbers or executing queries.
All execution logic is deterministic to prevent hallucinations.

ğŸ§  LLM Usage Philosophy

LLM role: intent classification & parameter extraction

No trust in raw LLM output

Sanitization + fallback logic applied

Local model (Ollama + Phi-3) used to avoid paid APIs

This ensures:

Predictable behavior

Production safety

Robust handling of malformed outputs

ğŸ“‚ Repository Structure
shopify-ai-analytics/
â”‚
â”œâ”€â”€ rails-api/        # Rails API Gateway
â”‚â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ ai-service/       # Python FastAPI AI Service
â”‚â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ README.md         # (This file)


Each service has its own detailed README.

ğŸ”Œ API Example (End-to-End)
Request
POST /api/v1/questions

{
  "store_id": "example-store.myshopify.com",
  "question": "What were my top selling products last week?"
}

Response
{
  "answer": "Your top selling product in the last 7 days is Product A with around 120 units sold.",
  "confidence": "medium"
}

ğŸ“Š ShopifyQL Examples (Required)

Below are example ShopifyQL queries generated by the agent.

Execution is mocked; queries demonstrate reasoning correctness.

1ï¸âƒ£ Top Selling Products (Sales)

Question

â€œWhat were my top 5 selling products last week?â€

Intent

Sales

ShopifyQL

FROM sales
SHOW sum(quantity) AS total_sold
GROUP BY product_title
SINCE -7d
ORDER BY total_sold DESC
LIMIT 5

2ï¸âƒ£ Inventory Risk (Stock-out Prediction)

Question

â€œWhich products are likely to go out of stock in 7 days?â€

Intent

Inventory

ShopifyQL

FROM inventory_levels
SHOW available
ORDER BY available ASC

3ï¸âƒ£ Inventory Reorder Suggestion

Question

â€œHow much inventory should I reorder based on last 30 days sales?â€

Intent

Sales + Inventory

ShopifyQL

FROM sales
SHOW sum(quantity) AS total_sold
GROUP BY product_title
SINCE -30d

4ï¸âƒ£ Repeat Customers

Question

â€œWhich customers placed repeat orders in the last 90 days?â€

Intent

Customers

ShopifyQL

FROM customers
SHOW count(id)
WHERE orders_count > 1
SINCE -90d

ğŸ” Shopify OAuth (Design Explanation)

OAuth is handled by Rails, not the AI service.

Planned OAuth Flow

Merchant installs app

Shopify redirects to Rails OAuth endpoint

Rails exchanges code for access token

Token stored securely (encrypted)

Token used to query Shopify APIs

OAuth is mocked for this assignment to prioritize system design and agent reasoning.

ğŸ§ª Error Handling & Reliability

The system gracefully handles:

Malformed LLM output

Missing parameters

Partial data

AI service downtime

Encoding issues (Windows + subprocess)

Fallback responses ensure the user always gets a meaningful answer.

ğŸ—ƒï¸ Database (Optional)

PostgreSQL can be used for:

Request logs

Store metadata

Analytics history

Database usage is optional and not required for core functionality.

ğŸš€ Running the System Locally
Start AI Service
cd ai-service
uvicorn app.main:app --reload --port 8000

Start Rails API
cd rails-api
rails server

âš ï¸ Known Limitations (Intentional)

ShopifyQL execution is mocked

OAuth flow is explained, not implemented

No caching or conversation memory

These trade-offs align with the 48-hour time constraint.

âœ… Evaluation Mapping
Evaluation Criteria	Status
System design & architecture	âœ…
Rails API design	âœ…
Python + LLM orchestration	âœ…
Agentic workflow	âœ…
ShopifyQL understanding	âœ…
Error handling	âœ…
Code readability	âœ…
Explanation clarity	âœ…
ğŸ Conclusion

This project demonstrates a production-minded AI analytics architecture, with:

Safe LLM usage

Deterministic analytics execution

Clear separation of concerns

Strong agent reasoning

Practical handling of real-world issues

The system is easily extensible to real Shopify data with minimal changes.